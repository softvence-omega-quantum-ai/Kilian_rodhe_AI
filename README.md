# Kilian Rodhe - AI Image Generation Service

ржПржХржЯрж┐ рж╢ржХрзНрждрж┐рж╢рж╛рж▓рзА ржПржмржВ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ ржорж╛рж░рзНржЪрзЗржирзНржбрж╛ржЗржЬ ржбрж┐ржЬрж╛ржЗржи ржЬрзЗржирж╛рж░рзЗрж╢ржи рж╕рж╛рж░рзНржнрж┐рж╕ ржпрж╛ FastAPI, Google Generative AI (Gemini 2.5), ржПржмржВ AWS S3 ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржХрж╛рж╕рзНржЯржо ржЯрж┐-рж╢рж╛рж░рзНржЯ ржПржмржВ ржоржЧ ржбрж┐ржЬрж╛ржЗржи рждрзИрж░рж┐ ржХрж░рзЗред

A powerful automated merchandise design generation service that creates custom t-shirt and mug designs using FastAPI, Google Generative AI (Gemini 2.5), and AWS S3.

---

## ЁЯОп ржкрзНрж░ржЬрзЗржХрзНржЯ рж╕ржорзНржкрж░рзНржХрзЗ (Project Overview)

ржПржЗ ржкрзНрж░ржЬрзЗржХрзНржЯржЯрж┐ ржПржХржЯрж┐ AI-ржкрж╛ржУржпрж╝рж╛рж░ржб ржорж╛рж░рзНржЪрзЗржирзНржбрж╛ржЗржЬ ржбрж┐ржЬрж╛ржЗржи рж╕рж╛рж░рзНржнрж┐рж╕ ржпрж╛ ржЗржЙржЬрж╛рж░ржжрзЗрж░ ржЯрзЗржХрзНрж╕ржЯ ржкрзНрж░ржорзНржкржЯ ржПржмржВ ржЕржкрж╢ржирж╛рж▓ ржЗржорзЗржЬ ржЖржкрж▓рзЛржб ржХрж░рж╛рж░ ржорж╛ржзрзНржпржорзЗ ржкрзНрж░ржлрзЗрж╢ржирж╛рж▓ ржЯрж┐-рж╢рж╛рж░рзНржЯ ржПржмржВ ржоржЧ ржбрж┐ржЬрж╛ржЗржи рждрзИрж░рж┐ ржХрж░рждрзЗ ржжрзЗржпрж╝ред

This project is an AI-powered merchandise design service that allows users to create professional t-shirt and mug designs through text prompts and optional image uploads.

### тЬи ржХрзА ржХрзА ржлрж┐ржЪрж╛рж░ ржЖржЫрзЗ (Key Features)

- **ЁЯОи AI-Powered Design Generation**: Google Gemini 2.5 Flash Image ржоржбрзЗрж▓ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ ржбрж┐ржЬрж╛ржЗржи рждрзИрж░рж┐
- **ЁЯСХ T-Shirt Design**: ржХрж╛рж╕рзНржЯржо ржЯрж┐-рж╢рж╛рж░рзНржЯ ржбрж┐ржЬрж╛ржЗржи ржПржмржВ рж░рж┐ржпрж╝рзЗрж▓рж┐рж╕рзНржЯрж┐ржХ ржоржХржЖржк рждрзИрж░рж┐
- **тШХ Mug Design**: ржкрзНрж░ржлрзЗрж╢ржирж╛рж▓ ржоржЧ ржбрж┐ржЬрж╛ржЗржи ржПржмржВ ржоржХржЖржк ржЬрзЗржирж╛рж░рзЗрж╢ржи (рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ржнрж╛ржмрзЗ ржкрзНрж░ржорзНржкржЯ ржерзЗржХрзЗ ржбрж┐ржЯрзЗржХрзНржЯ ржХрж░рзЗ)
- **ЁЯУ╕ Optional Logo Upload**: ржирж┐ржЬрзЗрж░ рж▓рзЛржЧрзЛ ржмрж╛ ржЗржорзЗржЬ ржЖржкрж▓рзЛржб ржХрж░рзЗ ржбрж┐ржЬрж╛ржЗржирзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛рж░ рж╕рзБржмрж┐ржзрж╛
- **тШБя╕П AWS S3 Cloud Storage**: рж╕ржм ржЬрзЗржирж╛рж░рзЗржЯрзЗржб ржЗржорзЗржЬ AWS S3-рждрзЗ ржЖржкрж▓рзЛржб ржПржмржВ ржкрж╛ржмрж▓рж┐ржХ URL ржкрзНрж░ржжрж╛ржи
- **ЁЯФД Automatic Retry Logic**: API ржмрзНржпрж░рзНрже рж╣рж▓рзЗ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ржнрж╛ржмрзЗ ржкрзБржирж░рж╛ржпрж╝ ржЪрзЗрж╖рзНржЯрж╛ (Tenacity ржжрж┐ржпрж╝рзЗ)
- **ЁЯУЭ Professional Logging**: рж╕ржм ржЕржкрж╛рж░рзЗрж╢ржирзЗрж░ ржЬржирзНржп ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд рж▓ржЧрж┐ржВ рж╕рж┐рж╕рзНржЯрзЗржо
- **ЁЯЪА Fast & Efficient**: FastAPI ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржжрзНрж░рзБржд ржПржмржВ ржЕрзНржпрж╛рж╕рж┐ржЩрзНржХрзНрж░рзЛржирж╛рж╕ API

---

## ЁЯЫая╕П ржкрзНрж░ржпрзБржХрзНрждрж┐ рж╕рзНржЯрзНржпрж╛ржХ (Tech Stack)

### Backend Framework
- **FastAPI**: ржЖржзрзБржирж┐ржХ, ржжрзНрж░рзБржд (high-performance) Python web framework
- **Uvicorn**: ASGI server
- **Pydantic**: Data validation ржПржмржВ settings management

### AI/ML
- **Google Generative AI (Gemini 2.5 Flash Image)**: ржЯрзЗржХрзНрж╕ржЯ ржПржмржВ ржЗржорзЗржЬ ржЬрзЗржирж╛рж░рзЗрж╢ржи
- **google-genai**: Official Google Generative AI Python SDK

### Cloud & Storage
- **AWS S3**: ржХрзНрж▓рж╛ржЙржб рж╕рзНржЯрзЛрж░рзЗржЬ ржЬрзЗржирж╛рж░рзЗржЯрзЗржб ржЗржорзЗржЬрзЗрж░ ржЬржирзНржп
- **Boto3**: AWS SDK for Python

### Image Processing
- **Pillow (PIL)**: ржЗржорзЗржЬ ржкрзНрж░рж╕рзЗрж╕рж┐ржВ ржПржмржВ manipulation
- **Python-multipart**: ржлрж╛ржЗрж▓ ржЖржкрж▓рзЛржб рж╣рзНржпрж╛ржирзНржбрж▓рж┐ржВ

### Utilities
- **Tenacity**: Retry logic ржПржмржВ error handling
- **Python-dotenv**: ржПржиржнрж╛ржпрж╝рж░ржиржорзЗржирзНржЯ ржнрзЗрж░рж┐ржпрж╝рзЗржмрж▓ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ
- **Requests**: HTTP рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯ
- **Colorama**: ржЯрж╛рж░рзНржорж┐ржирж╛рж▓ ржХрж╛рж▓рж╛рж░ ржЖржЙржЯржкрзБржЯ

### Development Tools
- **Docker**: Containerization support
- **Docker Compose**: Multi-container orchestration

---

## ЁЯУж ржЗржирзНрж╕ржЯрж▓рзЗрж╢ржи ржПржмржВ рж╕рзЗржЯржЖржк (Installation & Setup)

### Prerequisites

- Python 3.8+
- Google Generative AI API Key
- AWS Account with S3 access
- pip ржмрж╛ conda ржкрзНржпрж╛ржХрзЗржЬ ржорзНржпрж╛ржирзЗржЬрж╛рж░

### Installation Steps

1. **Repository Clone ржХрж░рзБржи**:

   ```bash
   git clone https://github.com/yourusername/KilianRodhe_ImageGeneration_AI.git
   cd KilianRodhe_ImageGeneration_AI
   ```

2. **Dependencies Install ржХрж░рзБржи**:

   ```bash
   pip install -r requirements.txt
   ```

3. **Environment Configuration**:
   
   ржкрзНрж░ржЬрзЗржХрзНржЯ рж░рзБржЯ ржбрж┐рж░рзЗржХрзНржЯрж░рж┐рждрзЗ ржПржХржЯрж┐ `.env` ржлрж╛ржЗрж▓ рждрзИрж░рж┐ ржХрж░рзБржи:

   ```env
   # Google Gemini API
   GEMINI_API_KEY=your_gemini_api_key_here

   # AWS S3 Configuration
   AWS_ACCESS_KEY_ID=your_aws_access_key_id
   AWS_SECRET_ACCESS_KEY=your_aws_secret_access_key
   AWS_REGION=us-east-1
   AWS_S3_BUCKET_NAME=your_bucket_name
   ```

4. **Application Run ржХрж░рзБржи**:

   ```bash
   uvicorn main:app --reload
   ```

   ржЕржержмрж╛ production ржПрж░ ржЬржирзНржп:

   ```bash
   uvicorn main:app --host 0.0.0.0 --port 8000
   ```

5. **Docker ржжрж┐ржпрж╝рзЗ Run ржХрж░рзБржи** (Optional):

   ```bash
   docker-compose up --build
   ```

6. **API Documentation Access ржХрж░рзБржи**:
   - Swagger UI: http://127.0.0.1:8000/docs
   - ReDoc: http://127.0.0.1:8000/redoc

---

## ЁЯФМ API Endpoints

### 1. Root Endpoint

**Endpoint**: `GET /`

**Description**: API service ржПрж░ рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржЪрзЗржХ ржХрж░рж╛рж░ ржЬржирзНржп

**Response**:

```json
{
  "message": "Welcome to the Kilian Rodhe API.Image Generation Service and project name is: Kilian_Rodhe"
}
```

---

### 2. Generate Merchandise Design

**Endpoint**: `POST /generate_merchandise`

**Description**: ржЯрзЗржХрзНрж╕ржЯ ржкрзНрж░ржорзНржкржЯ ржПржмржВ ржЕржкрж╢ржирж╛рж▓ ржЗржорзЗржЬ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЯрж┐-рж╢рж╛рж░рзНржЯ ржмрж╛ ржоржЧ ржбрж┐ржЬрж╛ржЗржи ржПржмржВ ржоржХржЖржк рждрзИрж░рж┐ ржХрж░рзЗред

**Request Type**: `multipart/form-data`

**Parameters**:

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `prompt` | string (Form) | тЬЕ Yes | ржбрж┐ржЬрж╛ржЗржирзЗрж░ ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржмрж░рзНржгржирж╛ (e.g., "A cool gaming logo with neon colors") |
| `img_file` | file (File) | тЭМ No | ржЕржкрж╢ржирж╛рж▓ рж▓рзЛржЧрзЛ/ржЗржорзЗржЬ ржлрж╛ржЗрж▓ (JPEG, PNG, BMP) |

**Request Example**:

```bash
curl -X POST "http://127.0.0.1:8000/generate_merchandise" \
  -H "Content-Type: multipart/form-data" \
  -F "prompt=A minimalist coffee mug design with mountain silhouette" \
  -F "img_file=@/path/to/your/logo.png"
```

**Response Example**:

```json
{
  "generated_design_url": "https://your-bucket.s3.us-east-1.amazonaws.com/generated_images/20260204_143025_a1b2c3d4.png",
  "mockup_url": "https://your-bucket.s3.us-east-1.amazonaws.com/generated_images/20260204_143028_e5f6g7h8.png"
}
```

**Response Fields**:
- `generated_design_url`: ржкрзНрж░рж┐ржирзНржЯ-рж░рзЗржбрж┐ ржбрж┐ржЬрж╛ржЗржи ржЗржорзЗржЬрзЗрж░ AWS S3 URL
- `mockup_url`: рж░рж┐ржпрж╝рзЗрж▓рж┐рж╕рзНржЯрж┐ржХ ржкрзНрж░рзЛржбрж╛ржХрзНржЯ ржоржХржЖржкрзЗрж░ AWS S3 URL

**Supported File Types**:
- `image/jpeg` (.jpg, .jpeg)
- `image/png` (.png)
- `image/bmp` (.bmp)

**Error Responses**:

```json
// Invalid file type
{
  "detail": "Only Image file are acceptable."
}

// File not found
{
  "detail": "File not found."
}
```

---

## ЁЯЧВя╕П ржкрзНрж░ржЬрзЗржХрзНржЯ рж╕рзНржЯрзНрж░рж╛ржХржЪрж╛рж░ (Project Structure)

```
KilianRodhe_ImageGeneration_AI/
тФВ
тФЬтФАтФА main.py                     # FastAPI ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи ржПржирзНржЯрзНрж░рж┐ ржкржпрж╝рзЗржирзНржЯ
тФЬтФАтФА requirements.txt            # Python dependencies
тФЬтФАтФА pyproject.toml             # Project metadata
тФЬтФАтФА Dockerfile                 # Docker containerization
тФЬтФАтФА docker-compose.yml         # Docker compose configuration
тФЬтФАтФА .env                       # Environment variables (not in repo)
тФЬтФАтФА README.md                  # ржПржЗ ржлрж╛ржЗрж▓
тФВ
тФЬтФАтФА app/                       # Main application package
тФВ   тФЬтФАтФА __init__.py
тФВ   тФЬтФАтФА config.py              # Configuration ржПржмржВ constants
тФВ   тФВ
тФВ   тФЬтФАтФА api/                   # API routes
тФВ   тФВ   тФЬтФАтФА __init__.py
тФВ   тФВ   тФФтФАтФА v1/                # API version 1
тФВ   тФВ       тФЬтФАтФА __init__.py
тФВ   тФВ       тФФтФАтФА endpoints/     # API endpoint modules
тФВ   тФВ           тФЬтФАтФА __init__.py
тФВ   тФВ           тФФтФАтФА t_shirt_endpoint.py  # Merchandise generation endpoint
тФВ   тФВ
тФВ   тФЬтФАтФА services/              # Business logic services
тФВ   тФВ   тФЬтФАтФА __init__.py
тФВ   тФВ   тФФтФАтФА t_shirt/           # T-shirt/merchandise service
тФВ   тФВ       тФЬтФАтФА __init__.py
тФВ   тФВ       тФФтФАтФА shirt.py       # TShirt class - main design logic
тФВ   тФВ
тФВ   тФЬтФАтФА schemas/               # Pydantic models
тФВ   тФВ   тФЬтФАтФА __init__.py
тФВ   тФВ   тФФтФАтФА schema.py          # Data validation schemas
тФВ   тФВ
тФВ   тФФтФАтФА utils/                 # Utility functions
тФВ       тФЬтФАтФА __init__.py
тФВ       тФЬтФАтФА helper.py          # Helper functions (S3 upload, image processing)
тФВ       тФФтФАтФА logger.py          # Logging configuration
тФВ
тФЬтФАтФА data/                      # Generated images temporary storage
тФЬтФАтФА logs/                      # Application logs
тФФтФАтФА temp/                      # Temporary uploaded files
```

---

## ЁЯОи ржХрзАржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ (How It Works)

### Design Generation Flow:

1. **User Input**: ржЗржЙржЬрж╛рж░ ржЯрзЗржХрзНрж╕ржЯ ржкрзНрж░ржорзНржкржЯ ржжрзЗржпрж╝ ржПржмржВ ржЕржкрж╢ржирж╛рж▓рж┐ ржПржХржЯрж┐ рж▓рзЛржЧрзЛ/ржЗржорзЗржЬ ржЖржкрж▓рзЛржб ржХрж░рзЗ
2. **Image Upload**: ржпржжрж┐ ржЗржорзЗржЬ ржерж╛ржХрзЗ, рждрж╛ temporary folder-ржП рж╕рзЗржн рж╣ржпрж╝
3. **AI Processing**: 
   - Google Gemini 2.5 ржоржбрзЗрж▓ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржкрзНрж░рж┐ржирзНржЯ-рж░рзЗржбрж┐ ржбрж┐ржЬрж╛ржЗржи рждрзИрж░рж┐ рж╣ржпрж╝
   - ржпржжрж┐ ржЗржорзЗржЬ ржжрзЗржУржпрж╝рж╛ ржерж╛ржХрзЗ, рж╕рзЗржЯрж┐ ржорзВрж▓ рж▓рзЛржЧрзЛ рж╣рж┐рж╕рзЗржмрзЗ preserve ржХрж░рж╛ рж╣ржпрж╝
   - ржкрзНрж░ржорзНржкржЯ ржЕржирзБржпрж╛ржпрж╝рзА ржХржоржкрзНрж▓рж┐ржорзЗржирзНржЯрж╛рж░рж┐ ржПрж▓рж┐ржорзЗржирзНржЯ ржпрзЛржЧ ржХрж░рж╛ рж╣ржпрж╝
4. **Mockup Generation**:
   - ржкрзНрж░ржорзНржкржЯ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржХрж░рзЗ ржЯрж┐-рж╢рж╛рж░рзНржЯ ржмрж╛ ржоржЧ ржбрж┐ржЯрзЗржХрзНржЯ ржХрж░рж╛ рж╣ржпрж╝
   - ржЙржкржпрзБржХрзНржд ржоржХржЖржк рждрзИрж░рж┐ ржХрж░рж╛ рж╣ржпрж╝ (realistic product photography)
5. **S3 Upload**: ржЙржнржпрж╝ ржЗржорзЗржЬ AWS S3-ржП ржЖржкрж▓рзЛржб рж╣ржпрж╝
6. **Response**: ржкрж╛ржмрж▓рж┐ржХ URL-ржЧрзБрж▓рзЛ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рж╛ рж╣ржпрж╝
7. **Cleanup**: Temporary ржлрж╛ржЗрж▓ ржбрж┐рж▓рж┐ржЯ ржХрж░рж╛ рж╣ржпрж╝ (background task)

### Automatic Product Detection:

рж╕рж┐рж╕рзНржЯрзЗржо рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ржнрж╛ржмрзЗ ржмрзБржЭрзЗ ржирзЗржпрж╝ ржХрзЛржи ржзрж░ржирзЗрж░ ржоржХржЖржк рждрзИрж░рж┐ ржХрж░рждрзЗ рж╣ржмрзЗ:
- ржкрзНрж░ржорзНржкржЯрзЗ **"mug"**, **"cup"**, ржмрж╛ **"ceramic"** ржерж╛ржХрж▓рзЗ тЖТ Mug Mockup
- ржЕржирзНржпржерж╛ржпрж╝ тЖТ T-Shirt Mockup

### Retry Mechanism:

- API ржмрзНржпрж░рзНрже рж╣рж▓рзЗ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ржнрж╛ржмрзЗ **3 ржмрж╛рж░** ржкрзБржирж░рж╛ржпрж╝ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзЗ
- Exponential backoff ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ (4s, 8s, 10s)
- Server errors (500) ржПржмржВ service unavailable errors рж╣рзНржпрж╛ржирзНржбрж▓ ржХрж░рзЗ

---

## ЁЯУЭ ржХрзЛржб ржЖрж░рзНржХрж┐ржЯрзЗржХржЪрж╛рж░ (Code Architecture)

### Service Layer (`app/services/t_shirt/shirt.py`)

**TShirt Class** - ржорзВрж▓ ржмрж┐ржЬржирзЗрж╕ рж▓ржЬрж┐ржХ:

```python
class TShirt:
    - __init__(prompt): Constructor
    - model_client(): Gemini API client setup
    - generate_shirt_design(): ржкрзНрж░рж┐ржирзНржЯ-рж░рзЗржбрж┐ ржбрж┐ржЬрж╛ржЗржи рждрзИрж░рж┐
    - generate_shirt_mockup(): ржЯрж┐-рж╢рж╛рж░рзНржЯ mockup рждрзИрж░рж┐
    - generate_mug_mockup(): ржоржЧ mockup рждрзИрж░рж┐
    - generate_mockup(): рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ mockup рж╕рж┐рж▓рзЗржХрж╢ржи
    - _mockup_target(): ржкрзНрж░ржорзНржкржЯ ржерзЗржХрзЗ product type ржбрж┐ржЯрзЗржХрзНржЯ
```

### API Layer (`app/api/v1/endpoints/t_shirt_endpoint.py`)

**Endpoints**:
- `POST /generate_merchandise`: ржорзЗржЗржи API endpoint
  - Request validation
  - File upload handling
  - Service orchestration
  - Background task management
  - Error handling

### Utility Layer (`app/utils/helper.py`)

**Key Functions**:
- `s3_file_upload()`: AWS S3-ржП ржлрж╛ржЗрж▓ ржЖржкрж▓рзЛржб
- `upload_image()`: ржЗржорзЗржЬ file-ржХрзЗ API format-ржП convert
- `response_data_img()`: API response ржерзЗржХрзЗ ржЗржорзЗржЬ extract ржПржмржВ save
- `delete_file()`: Temporary ржлрж╛ржЗрж▓ cleanup

### Configuration (`app/config.py`)

**Settings**:
- API keys ржПржмржВ credentials
- Model configuration (Gemini 2.5 Flash Image)
- AWS S3 setup
- Paths ржПржмржВ constants
- Prompt templates

---

## ЁЯЪА ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржЙржжрж╛рж╣рж░ржг (Usage Examples)

### Example 1: Simple T-Shirt Design (Without Image)

```bash
curl -X POST "http://127.0.0.1:8000/generate_merchandise" \
  -F "prompt=Cool gaming t-shirt with neon RGB colors and futuristic elements"
```

### Example 2: T-Shirt with Logo

```bash
curl -X POST "http://127.0.0.1:8000/generate_merchandise" \
  -F "prompt=Professional corporate t-shirt design, minimalist style" \
  -F "img_file=@company_logo.png"
```

### Example 3: Coffee Mug Design

```bash
curl -X POST "http://127.0.0.1:8000/generate_merchandise" \
  -F "prompt=Coffee mug with mountain landscape and inspirational quote"
```

### Example 4: Mug with Custom Logo

```bash
curl -X POST "http://127.0.0.1:8000/generate_merchandise" \
  -F "prompt=Ceramic mug design with vintage aesthetic" \
  -F "img_file=@vintage_logo.png"
```

### Python Example:

```python
import requests

url = "http://127.0.0.1:8000/generate_merchandise"

# Without image
data = {
    "prompt": "Minimalist tech startup t-shirt with geometric patterns"
}
response = requests.post(url, data=data)
print(response.json())

# With image
files = {
    "img_file": open("logo.png", "rb")
}
data = {
    "prompt": "Modern t-shirt design incorporating the uploaded logo"
}
response = requests.post(url, data=data, files=files)
print(response.json())
```

---

## ЁЯЫбя╕П Error Handling

ржкрзНрж░ржЬрзЗржХрзНржЯрзЗ ржмрж┐ржнрж┐ржирзНржи рж▓рзЗржнрзЗрж▓рзЗ error handling implement ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ:

### API Level Errors:
- Invalid file type тЖТ HTTP 404
- File not found тЖТ HTTP 400
- General exceptions тЖТ HTTP 500

### Service Level Errors:
- Google API failures тЖТ Automatic retry (3 attempts)
- S3 upload failures тЖТ ClientError exception
- Image processing errors тЖТ ValueError

### Logging:
рж╕ржм error ржПржмржВ operation `logs/` ржбрж┐рж░рзЗржХрзНржЯрж░рж┐рждрзЗ log ржХрж░рж╛ рж╣ржпрж╝:
- Info level: Normal operations
- Error level: Exceptions ржПржмржВ failures
- Retry attempts ржЯрзНрж░рзНржпрж╛ржХ ржХрж░рж╛ рж╣ржпрж╝

---

## ЁЯФз Configuration Options

### Environment Variables:

```env
# Google Gemini API
GEMINI_API_KEY=your_key_here

# AWS S3
AWS_ACCESS_KEY_ID=your_access_key
AWS_SECRET_ACCESS_KEY=your_secret_key
AWS_REGION=us-east-1
AWS_S3_BUCKET_NAME=your_bucket_name
```

### Model Configuration (`app/config.py`):

```python
MODEL_NAME = "gemini-2.5-flash-image"
TEMPERATURE = 1.0  # Creativity level (0.0-2.0)
```

### Customizable Prompts:

`CLOTHING_DESIGN_PROMPT` ржнрзЗрж░рж┐ржпрж╝рзЗржмрж▓ ржПржбрж┐ржЯ ржХрж░рзЗ ржбрж┐ржЬрж╛ржЗржи style ржХрж╛рж╕рзНржЯржорж╛ржЗржЬ ржХрж░рж╛ ржпрж╛ржпрж╝ред

---

## ЁЯУК Features Breakdown

### тЬЕ Implemented Features:

1. **AI-Powered Design Generation**
   - Text-to-image using Gemini 2.5
   - Logo preservation ржПржмржВ integration
   - Print-ready output (transparent background)

2. **Multiple Product Support**
   - T-shirt designs ржПржмржВ mockups
   - Mug designs ржПржмржВ mockups
   - Automatic product detection

3. **File Upload & Processing**
   - JPEG, PNG, BMP support
   - Image validation
   - Temporary file management

4. **Cloud Storage Integration**
   - AWS S3 upload
   - Unique filename generation
   - Public URL generation

5. **Robust Error Handling**
   - Retry logic with exponential backoff
   - Comprehensive logging
   - Graceful degradation

6. **API Documentation**
   - Auto-generated Swagger UI
   - ReDoc documentation
   - Request/response examples

### ЁЯФД Workflow Features:

- **Background Tasks**: Temporary file cleanup
- **CORS Support**: Cross-origin requests enabled
- **Async Operations**: FastAPI async endpoints
- **Type Safety**: Pydantic validation

---

## ЁЯР│ Docker Support

### Build and Run:

```bash
# Build image
docker build -t kilian-rodhe-api .

# Run container
docker run -p 8000:8000 --env-file .env kilian-rodhe-api

# Using docker-compose
docker-compose up -d
```

---

## ЁЯУИ Future Enhancements (Possible)

- [ ] More product types (hoodies, posters, phone cases)
- [ ] Batch processing multiple designs
- [ ] Design style presets
- [ ] User authentication ржПржмржВ API keys
- [ ] Design history ржПржмржВ favorites
- [ ] Advanced image editing options
- [ ] Custom mockup backgrounds
- [ ] PDF export for printing

---

## ЁЯдЭ Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

---

## ЁЯУД License

This project is licensed under the MIT License.

---

## ЁЯСитАНЁЯТ╗ Author

**Soudeep Sarkar**

---

## ЁЯУЮ Support

For issues and questions:
- Create an issue in the repository
- Contact: [your-email@example.com]

---

## ЁЯЩП Acknowledgments

- Google Generative AI for Gemini 2.5 model
- FastAPI framework
- AWS S3 for cloud storage
- Open source community

---

**Made with тЭдя╕П for automated merchandise design generation**

### 3. Party Planning

**Endpoint**: `POST /party_generate`

**Description**: Generates comprehensive party plans with gift suggestions and product recommendations.

**Request Body**:

```json
{
  "person_name": "John",
  "person_age": 8,
  "budget": 1500.0,
  "num_guests": 15,
  "party_date": "2025-12-15",
  "location": "Home",
  "party_details": {
    "theme": "Superhero",
    "favorite_activities": ["games", "dancing", "crafts"]
  },
  "num_product": 5
}
```

**Response**:

```json
{
  "party_plan": {
    "ЁЯОи Theme & Decorations": ["decoration suggestions"],
    "ЁЯОЙ Fun Activities": ["activity list"],
    "ЁЯНФ Food & Treats": ["food suggestions"],
    "ЁЯЫНя╕П Party Supplies": ["supply list"],
    "тП░ Party Timeline": ["timeline with emojis"],
    "ЁЯОБ Suggested Gifts": ["gift suggestions"],
    "ЁЯМЯ New Adventure Ideas": ["adventure ideas"]
  },
  "suggest_gifts": ["product recommendations"],
  "all_product": ["available products"]
}
```

## Project Structure

```
PartyPlaneGenerator/
тФЬтФАтФА app/
тФВ   тФЬтФАтФА api/v1/endpoints/          # API route handlers
тФВ   тФВ   тФЬтФАтФА generate_card.py       # Birthday card endpoints
тФВ   тФВ   тФЬтФАтФА t_shirt_endpoint.py    # T-shirt design endpoints
тФВ   тФВ   тФФтФАтФА generate_party.py      # Party planning endpoints
тФВ   тФЬтФАтФА schemas/                   # Pydantic models
тФВ   тФВ   тФЬтФАтФА invite.py             # Birthday card schemas
тФВ   тФВ   тФФтФАтФА schema.py             # T-shirt and party schemas
тФВ   тФЬтФАтФА services/                  # Business logic
тФВ   тФВ   тФЬтФАтФА generator.py          # Card generation service
тФВ   тФВ   тФЬтФАтФА t_shirt/shirt.py      # T-shirt generation service
тФВ   тФВ   тФФтФАтФА party/party.py        # Party planning service
тФВ   тФЬтФАтФА utils/                     # Utilities
тФВ   тФВ   тФЬтФАтФА helper.py             # Helper functions
тФВ   тФВ   тФФтФАтФА logger.py             # Logging configuration
тФВ   тФФтФАтФА config.py                 # Application configuration
тФЬтФАтФА config/                        # Configuration files
тФЬтФАтФА data/                         # Sample/reference images
тФЬтФАтФА generated_cards/              # Generated card outputs
тФЬтФАтФА logs/                         # Application logs
тФЬтФАтФА main.py                       # FastAPI application entry point
тФФтФАтФА requirements.txt              # Python dependencies
```

## Configuration

### Environment Variables

| Variable                | Description                  | Required |
| ----------------------- | ---------------------------- | -------- |
| `GEMINI_API_KEY`        | Google Generative AI API key | Yes      |
| `CLOUDINARY_CLOUD_NAME` | Cloudinary cloud name        | Yes      |
| `CLOUDINARY_API_KEY`    | Cloudinary API key           | Yes      |
| `CLOUDINARY_API_SECRET` | Cloudinary API secret        | Yes      |

### Application Settings

Key configuration constants in `app/config.py`:

- `MODEL_NAME`: "gemini-2.5-flash-image-preview"
- `PRODUCT_MODEL`: "gemini-2.5-flash"
- `TEMPERATURE`: 1.0
- `PRODUCT_API`: External product API endpoint

## Error Handling

The API implements comprehensive error handling:

- **400**: Bad Request (invalid file types, missing files)
- **404**: Not Found (file not found)
- **500**: Internal Server Error (AI generation failures, processing errors)

Retry logic is implemented for AI API calls with exponential backoff.

## Logging

Application logs are stored in the `logs/` directory with timestamps. Logs include:

- Request processing information
- AI generation status
- Error details and stack traces
- Retry attempts

## Development

### Running in Development Mode

```bash
uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

### Testing

The application includes test files and sample data in the `data/` directory for development and testing purposes.

## Deployment

The application is configured for production deployment with:

- CORS middleware for cross-origin requests
- Async request handling
- Background task processing
- Automatic cleanup of temporary files

## License

MIT

## Author

Roksana18cse04

---
